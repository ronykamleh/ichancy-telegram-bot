# بوت تليجرام احترافي باللغة العربية 🤖

بوت تليجرام متطور ومتكامل باللغة العربية مع نظام إدارة الأرصدة والمعاملات المالية، ونظام الإحالات والهدايا.

## 🌟 المميزات الرئيسية

### 💰 نظام إدارة الأرصدة
- شحن الرصيد عبر طرق دفع متعددة (سيريتل كاش، البنك، USDT)
- سحب الرصيد بطرق آمنة ومتنوعة
- سجل شامل لجميع المعاملات
- نظام موافقة يدوي وآلي للمعاملات

### 👥 نظام الإحالات
- رابط إحالة فريد لكل مستخدم
- نسبة ربح من كل إيداع للمحالين
- تتبع شامل لأرباح الإحالات
- إحصائيات تفصيلية للإحالات

### 🎁 نظام الهدايا
- إهداء الرصيد بين المستخدمين
- أكواد هدايا قابلة للاستخدام
- إدارة متقدمة لأكواد الهدايا
- تتبع استخدام الأكواد

### 🔧 لوحة تحكم الإدمن
- إضافة وخصم الأرصدة يدوياً
- الموافقة على المعاملات المعلقة
- إحصائيات شاملة للمستخدمين والمعاملات
- إرسال رسائل جماعية
- إدارة أكواد الهدايا

### 📧 نظام التواصل
- إرسال رسائل للإدارة
- نظام رد آلي من الإدمن
- الأسئلة الشائعة
- معلومات الدعم الفني
- الشروط والأحكام

## 🛠️ التقنيات المستخدمة

- **Python 3.11+** - لغة البرمجة الأساسية
- **python-telegram-bot** - مكتبة التفاعل مع Telegram Bot API
- **SQLAlchemy** - ORM لإدارة قاعدة البيانات
- **SQLite/MySQL** - قاعدة البيانات
- **Docker** - للنشر والتوزيع
- **asyncio** - للبرمجة غير المتزامنة

## 📁 هيكل المشروع

```
telegram_bot_project/
├── bot.py                 # الملف الرئيسي للبوت
├── config.py             # إعدادات البوت
├── database.py           # نماذج قاعدة البيانات
├── keyboards.py          # لوحات المفاتيح التفاعلية
├── handlers.py           # معالجات الأوامر الرئيسية
├── payment_handler.py    # معالج المدفوعات
├── referral_handler.py   # معالج الإحالات والهدايا
├── admin_handler.py      # معالج صلاحيات الإدمن
├── contact_handler.py    # معالج نظام التواصل
├── utils.py              # الأدوات المساعدة
├── requirements.txt      # متطلبات المشروع
├── .env.example         # مثال للمتغيرات البيئية
├── Dockerfile           # ملف Docker
├── docker-compose.yml   # إعداد Docker Compose
├── run.sh              # سكريبت تشغيل البوت
├── test_bot.py         # اختبارات البوت
└── README.md           # هذا الملف
```

## 🚀 التثبيت والتشغيل

### المتطلبات الأساسية
- Python 3.11 أو أحدث
- pip (مدير حزم Python)
- Git (اختياري)

### 1. تحميل المشروع
```bash
git clone <repository-url>
cd telegram_bot_project
```

### 2. إعداد البيئة الافتراضية
```bash
python3 -m venv venv
source venv/bin/activate  # على Linux/Mac
# أو
venv\Scripts\activate     # على Windows
```

### 3. تثبيت المتطلبات
```bash
pip install -r requirements.txt
```

### 4. إعداد المتغيرات البيئية
```bash
cp .env.example .env
# قم بتعديل ملف .env وإضافة إعداداتك
```

### 5. تشغيل البوت
```bash
# الطريقة الأولى: استخدام السكريبت
./run.sh

# الطريقة الثانية: تشغيل مباشر
python bot.py
```

## 🐳 النشر باستخدام Docker

### 1. بناء الصورة
```bash
docker build -t arabic-telegram-bot .
```

### 2. تشغيل الحاوية
```bash
docker run -d --name bot --env-file .env arabic-telegram-bot
```

### 3. استخدام Docker Compose
```bash
# تشغيل البوت فقط
docker-compose up -d

# تشغيل البوت مع MySQL
docker-compose --profile mysql up -d
```

## ⚙️ الإعدادات

### المتغيرات البيئية الأساسية

| المتغير | الوصف | مثال |
|---------|--------|-------|
| `BOT_TOKEN` | رمز البوت من BotFather | `123456:ABC-DEF...` |
| `BOT_USERNAME` | اسم المستخدم للبوت | `my_bot` |
| `DATABASE_URL` | رابط قاعدة البيانات | `sqlite:///bot.db` |
| `ADMIN_IDS` | معرفات الإدمن (مفصولة بفواصل) | `123456789,987654321` |

### إعدادات المدفوعات

| المتغير | الوصف | القيمة الافتراضية |
|---------|--------|------------------|
| `MIN_DEPOSIT` | الحد الأدنى للإيداع | `5.0` |
| `MAX_DEPOSIT` | الحد الأقصى للإيداع | `10000.0` |
| `MIN_WITHDRAWAL` | الحد الأدنى للسحب | `10.0` |
| `MAX_WITHDRAWAL` | الحد الأقصى للسحب | `1000.0` |
| `WITHDRAWAL_FEE` | رسوم السحب (نسبة مئوية) | `0.02` |

### إعدادات الإحالات

| المتغير | الوصف | القيمة الافتراضية |
|---------|--------|------------------|
| `REFERRAL_PERCENTAGE` | نسبة ربح الإحالة | `5.0` |
| `MIN_GIFT` | الحد الأدنى للإهداء | `5.0` |

## 📊 قاعدة البيانات

### الجداول الرئيسية

#### جدول المستخدمين (users)
- `id` - المعرف الفريد
- `telegram_id` - معرف التليجرام
- `username` - اسم المستخدم
- `first_name` - الاسم الأول
- `last_name` - الاسم الأخير
- `balance` - الرصيد الحالي
- `referral_code` - كود الإحالة
- `referred_by` - أحاله بواسطة
- `referral_count` - عدد الإحالات
- `referral_earnings` - أرباح الإحالات
- `created_at` - تاريخ التسجيل
- `last_activity` - آخر نشاط

#### جدول المعاملات (transactions)
- `id` - المعرف الفريد
- `user_id` - معرف المستخدم
- `transaction_type` - نوع المعاملة
- `amount` - المبلغ
- `status` - حالة المعاملة
- `payment_method` - طريقة الدفع
- `description` - الوصف
- `created_at` - تاريخ الإنشاء

#### جدول الهدايا (gifts)
- `id` - المعرف الفريد
- `sender_id` - معرف المرسل
- `receiver_id` - معرف المستلم
- `amount` - المبلغ
- `created_at` - تاريخ الإرسال

#### جدول أكواد الهدايا (gift_codes)
- `id` - المعرف الفريد
- `code` - الكود
- `amount` - المبلغ
- `max_uses` - العدد الأقصى للاستخدام
- `current_uses` - الاستخدامات الحالية
- `is_active` - نشط أم لا
- `created_by` - أنشأه
- `created_at` - تاريخ الإنشاء

## 🔧 الاستخدام

### للمستخدمين العاديين

1. **البدء**: أرسل `/start` لبدء استخدام البوت
2. **شحن الرصيد**: اختر "شحن رصيد في البوت" واتبع التعليمات
3. **سحب الرصيد**: اختر "سحب رصيد من البوت" واتبع التعليمات
4. **الإحالات**: شارك رابط الإحالة الخاص بك مع الأصدقاء
5. **الهدايا**: استخدم "إهداء رصيد" أو "كود هدية"

### للإدمن

1. **الوصول**: أرسل `/admin` للوصول إلى لوحة التحكم
2. **إدارة الأرصدة**: إضافة أو خصم الأرصدة يدوياً
3. **المعاملات**: الموافقة على أو رفض المعاملات المعلقة
4. **الإحصائيات**: عرض إحصائيات شاملة
5. **الرسائل**: الرد على رسائل المستخدمين
6. **البث**: إرسال رسائل جماعية

## 🧪 الاختبارات

```bash
# تشغيل الاختبارات
python test_bot.py

# أو باستخدام unittest
python -m unittest test_bot.py
```

## 🔒 الأمان

- جميع المعاملات المالية تتطلب موافقة الإدمن
- تشفير البيانات الحساسة
- التحقق من صحة جميع المدخلات
- حماية من هجمات SQL Injection
- تسجيل شامل لجميع العمليات

## 📝 السجلات

يتم حفظ السجلات في مجلد `logs/` مع التصنيفات التالية:
- `bot.log` - سجل عام للبوت
- `transactions.log` - سجل المعاملات المالية
- `admin.log` - سجل عمليات الإدمن
- `errors.log` - سجل الأخطاء

## 🤝 المساهمة

نرحب بالمساهمات! يرجى اتباع الخطوات التالية:

1. Fork المشروع
2. إنشاء فرع للميزة الجديدة (`git checkout -b feature/AmazingFeature`)
3. Commit التغييرات (`git commit -m 'Add some AmazingFeature'`)
4. Push إلى الفرع (`git push origin feature/AmazingFeature`)
5. فتح Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف [LICENSE](LICENSE) للتفاصيل.

## 📞 الدعم

للحصول على الدعم أو الإبلاغ عن مشاكل:
- فتح Issue في GitHub
- التواصل عبر البريد الإلكتروني
- استخدام نظام التواصل في البوت

## 🔄 التحديثات

### الإصدار 1.0.0
- إطلاق النسخة الأولى
- جميع الميزات الأساسية
- نظام المدفوعات والإحالات
- لوحة تحكم الإدمن
- نظام التواصل

---

**تم تطوير هذا البوت بعناية فائقة لضمان الأداء الأمثل والأمان العالي** 🚀

